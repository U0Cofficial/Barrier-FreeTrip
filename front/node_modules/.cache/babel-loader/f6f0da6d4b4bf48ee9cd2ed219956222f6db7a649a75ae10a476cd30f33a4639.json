{"ast":null,"code":"import _objectSpread from\"/Users/jeong-yuyeong/Documents/GitHub/\\u110C\\u1169\\u11AF\\u110B\\u1165\\u11B8\\u110C\\u1161\\u11A8\\u1111\\u116E\\u11B7/Barrier-FreeTrip/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{userState}from\"../atoms/userAtom\";import{useSetRecoilState}from\"recoil\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SignupPage(){const[formData,setFormData]=useState({name:\"\",username:\"\",password:\"\"});const navigate=useNavigate();const setUser=useSetRecoilState(userState);const[message,setMessage]=useState(\"\");const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();try{const res=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/api/auth/signup\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(formData)});const data=await res.json();if(res.ok){setMessage(\"\\u2705 \\uD68C\\uC6D0\\uAC00\\uC785 \\uC131\\uACF5! \\uC0AC\\uC6A9\\uC790 ID: \".concat(data.userId));setUser({id:data.userId,name:formData.name});localStorage.setItem(\"user\",JSON.stringify({id:data.userId,name:formData.name}));navigate(\"/mainpage\");}else{setMessage(\"\\u274C \\uC624\\uB958: \".concat(data.error));}}catch(err){setMessage(\"❌ 서버에 연결할 수 없습니다.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-[700px] mx-auto mt-20 mb-20 p-6 bg-white rounded shadow-md border\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4 text-center\",children:\"\\uD68C\\uC6D0\\uAC00\\uC785\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"\\uC774\\uB984\",value:formData.name,onChange:handleChange,required:true,className:\"w-full px-4 py-2 border rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"\\uC544\\uC774\\uB514\",value:formData.username,onChange:handleChange,required:true,className:\"w-full px-4 py-2 border rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\",value:formData.password,onChange:handleChange,required:true,className:\"w-full px-4 py-2 border rounded\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-green-500 text-white py-2 rounded hover:bg-green-600\",children:\"\\uD68C\\uC6D0\\uAC00\\uC785\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-center text-sm text-gray-700\",children:message})]});}","map":{"version":3,"names":["React","useState","useNavigate","userState","useSetRecoilState","jsx","_jsx","jsxs","_jsxs","SignupPage","formData","setFormData","name","username","password","navigate","setUser","message","setMessage","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","res","fetch","concat","process","env","REACT_APP_API_URL","method","headers","body","JSON","stringify","data","json","ok","userId","id","localStorage","setItem","error","err","className","children","onSubmit","type","placeholder","onChange","required"],"sources":["/Users/jeong-yuyeong/Documents/GitHub/졸업작품/Barrier-FreeTrip/front/src/pages/SignupPage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { userState } from \"../atoms/userAtom\";\nimport { useSetRecoilState } from \"recoil\";\n\nexport default function SignupPage() {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    username: \"\",\n    password: \"\",\n  });\n  const navigate = useNavigate();\n  const setUser = useSetRecoilState(userState);\n  const [message, setMessage] = useState(\"\");\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      const res = await fetch(`${process.env.REACT_APP_API_URL}/api/auth/signup`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(formData),\n      });\n\n      const data = await res.json();\n\n      if (res.ok) {\n        setMessage(`✅ 회원가입 성공! 사용자 ID: ${data.userId}`);\n        setUser({ id: data.userId, name: formData.name });\n        localStorage.setItem(\n          \"user\",\n          JSON.stringify({ id: data.userId, name: formData.name })\n        );\n        navigate(\"/mainpage\");\n      } else {\n        setMessage(`❌ 오류: ${data.error}`);\n      }\n    } catch (err) {\n      setMessage(\"❌ 서버에 연결할 수 없습니다.\");\n    }\n  };\n\n  return (\n    <div className=\"max-w-[700px] mx-auto mt-20 mb-20 p-6 bg-white rounded shadow-md border\">\n      <h2 className=\"text-2xl font-bold mb-4 text-center\">회원가입</h2>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"이름\"\n          value={formData.name}\n          onChange={handleChange}\n          required\n          className=\"w-full px-4 py-2 border rounded\"\n        />\n        <input\n          type=\"text\"\n          name=\"username\"\n          placeholder=\"아이디\"\n          value={formData.username}\n          onChange={handleChange}\n          required\n          className=\"w-full px-4 py-2 border rounded\"\n        />\n        <input\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"비밀번호\"\n          value={formData.password}\n          onChange={handleChange}\n          required\n          className=\"w-full px-4 py-2 border rounded\"\n        />\n        <button\n          type=\"submit\"\n          className=\"w-full bg-green-500 text-white py-2 rounded hover:bg-green-600\"\n        >\n          회원가입\n        </button>\n      </form>\n\n      {message && (\n        <p className=\"mt-4 text-center text-sm text-gray-700\">{message}</p>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}