{"ast":null,"code":"import _objectSpread from\"/Users/jeong-yuyeong/Documents/GitHub/\\u110C\\u1169\\u11AF\\u110B\\u1165\\u11B8\\u110C\\u1161\\u11A8\\u1111\\u116E\\u11B7/Barrier-FreeTrip/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{useRecoilState}from\"recoil\";import{useNavigate}from\"react-router-dom\";import{userState}from\"../atoms/userAtom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginPage(){const[formData,setFormData]=useState({username:\"\",password:\"\"});const[message,setMessage]=useState(\"\");const[user,setUser]=useRecoilState(userState);const navigate=useNavigate();const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();try{const res=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/api/auth/login\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(formData)});const data=await res.json();if(res.ok){setUser({id:data.userId,name:data.name});localStorage.setItem(\"user\",JSON.stringify({id:data.userId,name:data.name}));setMessage(\"✅ 로그인 성공!\");setTimeout(()=>{navigate(\"/mainpage\");},1500);}else{setMessage(\"\\u274C \\uC624\\uB958: \".concat(data.error));}}catch(err){setMessage(\"❌ 서버에 연결할 수 없습니다.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-[700px] mx-auto mt-20 mb-20 p-6 bg-white rounded shadow-md border\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4 text-center\",children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"\\uC544\\uC774\\uB514\",value:formData.username,onChange:handleChange,required:true,className:\"w-full px-4 py-2 border rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\",value:formData.password,onChange:handleChange,required:true,className:\"w-full px-4 py-2 border rounded\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-green-500 text-white py-2 rounded hover:bg-green-600\",children:\"\\uB85C\\uADF8\\uC778\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-center text-sm text-gray-700\",children:message})]});}","map":{"version":3,"names":["React","useState","useRecoilState","useNavigate","userState","jsx","_jsx","jsxs","_jsxs","LoginPage","formData","setFormData","username","password","message","setMessage","user","setUser","navigate","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","res","fetch","concat","process","env","REACT_APP_API_URL","method","headers","body","JSON","stringify","data","json","ok","id","userId","localStorage","setItem","setTimeout","error","err","className","children","onSubmit","type","placeholder","onChange","required"],"sources":["/Users/jeong-yuyeong/Documents/GitHub/졸업작품/Barrier-FreeTrip/front/src/pages/LoginPage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useRecoilState } from \"recoil\";\nimport { useNavigate } from \"react-router-dom\";\nimport { userState } from \"../atoms/userAtom\";\n\n\nexport default function LoginPage() {\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\",\n  });\n  const [message, setMessage] = useState(\"\");\n  const [user, setUser] = useRecoilState(userState);\n\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      const res = await fetch(`${process.env.REACT_APP_API_URL}/api/auth/login`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(formData),\n      });\n\n      const data = await res.json();\n\n      if (res.ok) {\n        setUser({ id: data.userId, name: data.name });\n        localStorage.setItem(\n          \"user\",\n          JSON.stringify({ id: data.userId, name: data.name })\n        );\n        setMessage(\"✅ 로그인 성공!\");\n        setTimeout(() => {\n          navigate(\"/mainpage\");\n        }, 1500);\n      } else {\n        setMessage(`❌ 오류: ${data.error}`);\n      }\n    } catch (err) {\n      setMessage(\"❌ 서버에 연결할 수 없습니다.\");\n    }\n  };\n\n  return (\n    <div className=\"max-w-[700px] mx-auto mt-20 mb-20 p-6 bg-white rounded shadow-md border\">\n      <h2 className=\"text-2xl font-bold mb-4 text-center\">로그인</h2>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <input\n          type=\"text\"\n          name=\"username\"\n          placeholder=\"아이디\"\n          value={formData.username}\n          onChange={handleChange}\n          required\n          className=\"w-full px-4 py-2 border rounded\"\n        />\n        <input\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"비밀번호\"\n          value={formData.password}\n          onChange={handleChange}\n          required\n          className=\"w-full px-4 py-2 border rounded\"\n        />\n        <button\n          type=\"submit\"\n          className=\"w-full bg-green-500 text-white py-2 rounded hover:bg-green-600\"\n        >\n          로그인\n        </button>\n      </form>\n\n      {message && (\n        <p className=\"mt-4 text-center text-sm text-gray-700\">\n          {message}\n          {/* {userId && `(userId: ${userId})`} */}\n        </p>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}